<!DOCTYPE html><html class=writer-html5 lang=en> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width, initial-scale=1.0"><meta name=author content=CCBR><link rel="shortcut icon" href=../../img/favicon.ico><title>xavier cache - XAVIER Documentation</title><link rel=stylesheet href=../../css/theme.css><link rel=stylesheet href=../../css/theme_extra.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css><link href=../../css/custom.css rel=stylesheet><link href=../../css/version-select.css rel=stylesheet><script>
        // Current page data
        var mkdocs_page_name = "xavier cache";
        var mkdocs_page_input_path = "usage/cache.md";
        var mkdocs_page_url = null;
      </script><!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]--><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js></script><script>hljs.highlightAll();</script></head> <body class=wy-body-for-nav role=document> <div class=wy-grid-for-nav> <nav data-toggle=wy-nav-shift class="wy-nav-side stickynav"> <div class=wy-side-scroll> <div class=wy-side-nav-search> <a href=../.. class="icon icon-home"> XAVIER Documentation </a><div role=search> <form id=rtd-search-form class=wy-form action=../../search.html method=get> <input type=text name=q placeholder="Search docs" aria-label="Search docs" title="Type search term here"> </form> </div> </div> <div class="wy-menu wy-menu-vertical" data-spy=affix role=navigation aria-label="Navigation menu"> <ul> <li class=toctree-l1><a class="reference internal" href=../..>About</a> </li> </ul> <p class=caption><span class=caption-text>Command Line</span></p> <ul class=current> <li class=toctree-l1><a href=../run/ class="reference internal">xavier run</a> </li> <li class=toctree-l1><a href=../unlock/ class="reference internal">xavier unlock</a> </li> <li class="toctree-l1 current"><a class="reference internal current" href=#>xavier cache</a> <ul class=current> <li class=toctree-l2><a class="reference internal" href=#1-about>1. About</a> </li> <li class=toctree-l2><a class="reference internal" href=#2-synopsis>2. Synopsis</a> </li> </ul> </li> </ul> <ul> <li class=toctree-l1><a href=../gui/ class="reference internal">Graphical Interface</a> </li> </ul> <p class=caption><span class=caption-text>Pipeline Details</span></p> <ul> <li class=toctree-l1><a href=../../pipeline-details/overview/ class="reference internal">Overview</a> </li> <li class=toctree-l1><a href=../../pipeline-details/methods/ class="reference internal">Methods</a> </li> <li class=toctree-l1><a href=../../pipeline-details/tools/ class="reference internal">Tools</a> </li> <li class=toctree-l1><a href=../../pipeline-details/settings/ class="reference internal">Settings</a> </li> <li class=toctree-l1><a href=../../pipeline-details/output/ class="reference internal">Output Files</a> </li> </ul> <p class=caption><span class=caption-text>FAQ</span></p> <ul> <li class=toctree-l1><a href=../../faq/questions/ class="reference internal">General Questions</a> </li> <li class=toctree-l1><a href=../../contributing/ class="reference internal">How to contribute</a> </li> </ul> <ul> <li class=toctree-l1><a href=../../license/ class="reference internal">License</a> </li> </ul> </div> </div> </nav> <section data-toggle=wy-nav-shift class=wy-nav-content-wrap> <nav class=wy-nav-top role=navigation aria-label="Mobile navigation menu"> <i data-toggle=wy-nav-top class="fa fa-bars"></i> <a href=../..>XAVIER Documentation</a> </nav> <div class=wy-nav-content> <div class=rst-content><div role=navigation aria-label="breadcrumbs navigation"> <ul class=wy-breadcrumbs> <li><a href=../.. class="icon icon-home" aria-label=Docs></a></li> <li class=breadcrumb-item>Command Line</li> <li class="breadcrumb-item active">xavier cache</li> <li class=wy-breadcrumbs-aside> <a href=https://github.com/CCBR/XAVIER/edit/unified/docs/usage/cache.md>Edit on CCBR/XAVIER</a> </li> </ul> <hr> </div> <div role=main class=document itemscope=itemscope itemtype=http://schema.org/Article> <div class=section itemprop=articleBody> <h1 id=xavier-cache><code>xavier <b>cache</b></code><a class=headerlink href=#xavier-cache title="Permanent link">&para;</a></h1> <h2 id=1-about>1. About<a class=headerlink href=#1-about title="Permanent link">&para;</a></h2> <p>The <code>xavier</code> executable is composed of several inter-related sub commands. Please see <code>xavier -h</code> for all available options.</p> <p>This part of the documentation describes options and concepts for <code>xavier <b>cache</b></code> sub command in more detail. With minimal configuration, the <strong><code>cache</code></strong> sub command enables you to cache remote resources for the xavier pipeline. Caching remote resources allows the pipeline to run in an offline mode. The cache sub command can also be used to pull our pre-built reference bundles onto a new cluster or target system.</p> <p>The cache sub command creates local cache on the filesysytem for resources hosted on DockerHub or AWS S3. These resources are normally pulled onto the filesystem when the pipeline runs; however, due to network issues or DockerHub pull rate limits, it may make sense to pull the resources once so a shared cache can be created and re-used. It is worth noting that a singularity cache cannot normally be shared across users. Singularity strictly enforces that its cache is owned by the user. To get around this issue, the cache subcommand can be used to create local SIFs on the filesystem from images on DockerHub.</p> <h2 id=2-synopsis>2. Synopsis<a class=headerlink href=#2-synopsis title="Permanent link">&para;</a></h2> <p>Coming Soon!</p> <!-- ```text
$ xavier cache [-h] --sif-cache SIF_CACHE \
                     [--resource-bundle RESOURCE_BUNDLE] \
                     [--dry-run]
<div class="highlight"><pre><span></span><code>The synopsis for each command shows its parameters and their usage. Optional parameters are shown in square brackets.

A user **must** provide a directory to cache remote Docker images via the `--sif-cache` argument. Once the cache has pipeline completed, the local sif cache can be passed to the `--sif-cache` option of the &lt;code&gt;xavier &lt;b&gt;build&lt;/b&gt;&lt;/code&gt; and &lt;code&gt;xavier &lt;b&gt;run&lt;/b&gt;&lt;/code&gt; subcomand. This enables the build and run pipeline to run in an offline mode.

Use you can always use the `-h` option for information on a specific command.

### 2.1 Required Arguments

`--sif-cache SIF_CACHE`

&gt; **Path where a local cache of SIFs will be stored..**
&gt; *type: string*
&gt;
&gt; Any images defined in *config/containers/images.json* will be pulled into the local filesystem. The path provided to this option can be passed to the `--sif-cache` option of the &lt;code&gt;xavier&lt;b&gt;build&lt;/b&gt;&lt;/code&gt; and &lt;code&gt;xavier &lt;b&gt;run&lt;/b&gt;&lt;/code&gt; subcomand. This allows for running the build and run pipelines in an offline mode where no requests are made to exteexomel sources. This is useful for avoiding network issues or DockerHub pull rate limits. Please see xavier build and run for more information.
&gt;
&gt; ***Example:*** `--sif-cache /data/$USER/cache`

### 2.2 Options

Each of the following arguments are optional and do not need to be provided.

  `-h, --help`
&gt; **Display Help.**
&gt; *type: boolean*
&gt;
&gt; Shows command&#39;s synopsis, help message, and an example command
&gt;
&gt; ***Example:*** `--help`


## 3. Example
```bash
# Step 0.) Grab an interactive node (do not run on head node)
srun -N 1 -n 1 --time=12:00:00 -p interactive --mem=8gb  --cpus-per-task=4 --pty bash
module purge
module load singularity snakemake

# Step 1.) Dry run cache to see what will be pulled
xavier cache --sif-cache /scratch/$USER/cache \
                 --dry-run

# Step 2.) Cache remote resources locally
xavier cache --sif-cache /scratch/$USER/cache
</code></pre></div>
--> </div> </div><script async src="https://www.googletagmanager.com/gtag/js?id=G-D3SL9V30KL"></script> <script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-D3SL9V30KL'); // Replace with your tracking ID
</script> </div> </div> </section> </div> <div class=rst-versions role=note aria-label=Versions> <span class=rst-current-version data-toggle=rst-current-version> <span> <a href=https://github.com/CCBR/XAVIER class="fa fa-code-fork" style="color: #fcfcfc"> CCBR/XAVIER</a> </span> <span><a href=../unlock/ style="color: #fcfcfc">&laquo; Previous</a></span> <span><a href=../gui/ style="color: #fcfcfc">Next &raquo;</a></span> </span> </div> <script src=../../js/jquery-3.6.0.min.js></script> <script>var base_url = "../..";</script> <script src=../../js/theme_extra.js></script> <script src=../../js/theme.js></script> <script src=../../js/custom.js></script> <script src=../../search/main.js></script> <script src=../../js/version-select.js></script> <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script> </body> </html> 